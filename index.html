<!doctype html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>:: Gulliver Traveller :: Cadastrar</title>
    <link rel="stylesheet" type="text/css" href="./src/css/style.css"/>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,600;0,800;0,900;1,100;1,200;1,300;1,400;1,600;1,800;1,900&family=Roboto:ital,wght@0,100;0,300;0,400;0,700;0,900;1,100;1,300;1,400;1,700;1,900&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="./src/js/menu-mobile.js"></script>
    <script src="./src/js/jquery.mask.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="icon" type="image/png" sizes="60x60" href="./assets/images/icons/favicon.png">
</head>
<header class="header">
    <div class="container">
        <div class="logo">
            <a href="#">
                <img class="logo-img" src="./assets/images/logo.png" alt="Website Logo Gulliver Traveller">
            </a>
        </div>
        <nav id="nav" class="top-nav">
            <button id="btn-mobile"></button>
            <ul id="menu">
                <li><a href="#">Destinos</a></li>
                <li><a href="#">Cadastrar Novo Destino</a></li>
                <li><a href="#">Séries</a></li>
            </ul>
        </nav>
    </div>
</header>
<body>
<div class="main-content">
    <div class="container register">
        <h1>Cadastrar um novo Destino</h1>

        <form name="register" id="form_register" method="post" action="#">
            <h3 class="form-register__sesssion title">Informações</h3>
            <fieldset class="fieldset fieldset-attraction">
                <label for="name">Nome do ponto turístico</label>
                <input class="field field-attraction field-attraction--name"
                       name="name"
                       type="text"
                       id="name"
                       placeholder="Nome da atração"
                       autofocus
                       required/>

                <label for="country">País</label>
                <input list="country__options"
                       id="country"
                       class="field field-attraction field-attraction__country country"
                       name="country"
                       placeholder="Selecione um país"
                       autocomplete="no"
                       required/>
                <datalist id="country__options">
                    <option class="option brazil"
                            data-value="0"
                            value="Brasil">
                    <option class="option usa"
                            data-value="1"
                            value="Estados Unidos">
                    <option class="option england"
                            data-value="2"
                            value="Inglaterra">
                </datalist>

                <div class="postcode-block">
                    <label for="postcode">CEP</label>
                    <input class="field field-attraction field-attraction__address postcode"
                           name="postcode"
                           type="text"
                           id="postcode"
                           placeholder="CEP"
                           required/>
                </div>

                <label for="street">Rua</label>
                <input class="field field-attraction field-attraction__address street"
                       name="street"
                       type="text"
                       id="street"
                       placeholder="Rua"
                       required/>

                <label for="number">Número</label>
                <input class="field field-attraction field-attraction__address number"
                       name="number"
                       type="text"
                       id="number"
                       placeholder="Número"
                       required/>

                <label for="neighborhood">Bairro</label>
                <input class="field field-attraction field-attraction__address neighborhood"
                       name="neighborhood"
                       type="text"
                       id="neighborhood"
                       placeholder="Bairro"
                       required/>

                <label for="city">Cidade</label>
                <input class="field field-attraction field-attraction__address city"
                       name="city"
                       type="text"
                       id="city"
                       placeholder="Cidade"
                       required/>
            </fieldset>

            <h3 class="form-register__sesssion title">Contato</h3>
            <fieldset class="fieldset fieldset-contact">
                <label for="website">Website</label>
                <input type="url"
                       class="field field-contact__website"
                       id="website"
                       placeholder="Website"/>

                <label for="email">E-mail</label>
                <input type="email"
                       class="field field-contact__email"
                       id="email"
                       placeholder="Email"/>

                <label for="telephone">Telefone</label>
                <input type="tel"
                       class="field field-telephone phone_with_ddd"
                       name="telephone"
                       id="telephone"
                       placeholder="Telefone"/>
            </fieldset>

            <h3 class="form-register__sesssion title">Funcionamento</h3>
            <fieldset class="fieldset fieldset-time">
                <div class="from">
                    <label for="from">Aberto desde</label>
                    <input class="field field-time field-time__hour"
                           name="from"
                           type="date"
                           id="from"/>
                </div>

                <div class="to">
                    <label for="to">Aberto até</label>
                    <input class="field field-time field-time__hour"
                           name="to"
                           type="date"
                           id="to"/>
                </div>
            </fieldset>

            <h3 class="form-register__sesssion title">Horários e preço</h3>
            <fieldset class="fieldset fieldset-oppened">
                <div class="fieldset fieldset-hours">
                    <div class="fieldset-hour-open">
                        <label for="open">Horário de abertura</label>
                        <input class="field field-time fieldset-hours-open"
                               name="open"
                               type="time"
                               id="open"/>
                    </div>

                    <div class="fieldset-hour-close">
                        <label for="close">Horário de fechamento</label>
                        <input class="field field-time fieldset-hours-close"
                               name="close"
                               type="time"
                               id="close"/>
                    </div>
                </div>

                <label for="price">Preço</label>
                <input class="field field-price field-price__amount price money"
                       name="price"
                       type="text"
                       id="price"
                       placeholder="Preço R$ 0,00"/>
            </fieldset>

            <h3 class="form-register__sesssion title">Descrição</h3>
            <fieldset class="fieldset fieldset-description">
                <label for="short_description">Curta descrição</label>
                <textarea class="field field-description field-description__short short_description"
                          name="short_description"
                          id="short_description"
                          maxlength="200"
                          placeholder="Descrição curta da atração"
                          required>
                </textarea>

                <label for="description">Descrição completa</label>
                <textarea class="field field-description field-description__full description"
                          name="description"
                          id="description"
                          maxlength="3000"
                          placeholder="Descrição completa da atração"
                          required>
                </textarea>
            </fieldset>

            <h3 class="form-register__sesssion title">Atração ativa?</h3>
            <fieldset class="fieldset fieldset-active">
                <input type="radio"
                       class="field-active field-active__yes yes"
                       name="yesno"
                       id="yes"
                       value=”1”>
                <label for="yes">
                    Sim
                </label>
                <input type="radio"
                       class="field-active field-active__no no"
                       name="yesno"
                       id="no"
                       value=”0”>
                <label for="no">Não</label>
            </fieldset>

            <h3 class="form-register__sesssion title">Avisos</h3>
            <fieldset class="fieldset fieldset-alerts">
                <select class="field field-alerts"
                        name="alert"
                        id="alert"
                        required>
                    <option class="field-alerts__option" value="0" disabled selected>
                        Selecione uma opção
                    </option>
                    <option class="field-alerts__option" value="1">
                        Restrições devido COVID-19
                    </option>
                    <option class="field-alerts__option" value="2">
                        Necessário comprovar vacinação contra COVID-19
                    </option>
                    <option class="field-alerts__option" value="3">
                        Necessário visto especial
                    </option>
                </select>
            </fieldset>

            <h3 class="form-register__sesssion title">Imagens</h3>
            <fieldset class="fieldset fieldset-photos">
                <label for="photo">Selecione o arquivo</label>
                <input type="file"
                       id="photo"
                       multiple>
            </fieldset>

            <div class="actions">
                <button class="btn btn-submit" type="submit">Cadastrar</button>
                <button class="btn btn-cancel" type="reset">Cancelar</button>
            </div>

        </form>
    </div>
</div>
<script type="text/javascript">
    $(document).ready(function(){
        $('.postcode').mask('00000-000');
        $('.phone_with_ddd').mask('(00) 0000-00000');
        $('.money').mask('000.000.000.000.000,00', {reverse: true});

        $('#country').on('blur', function(event) {
            $('.postcode-block').removeClass('show');
            if ( event.currentTarget.value === 'Brasil' ) {
                $('.postcode-block').addClass('show');
                $('#postcode').focus();
            }
        })

        $('#postcode').on('blur', function(event) {
            let address = getAddress(event.currentTarget.value);
            $('#street').val('');
            $('#neighborhood').val('');
            $('#city').val('');

            $('#street').removeAttr("readonly");
            $('#neighborhood').removeAttr("readonly");
            $('#city').removeAttr("readonly");

            if ( !address.erro ) {
                $('#street').val(address.logradouro);
                $('#street').attr("readonly", true);

                $('#neighborhood').val(address.bairro);
                $('#neighborhood').attr("readonly", true);

                $('#city').val(address.localidade);
                $('#city').attr("readonly", true);

                $('#number').focus();
            }
        })

        let getAddress = (value) => {
            let addressFinded;

            $.ajax({url: `https://viacep.com.br/ws/${value}/json/`,
                async: false,
                success: function(result){
                    addressFinded = result;
                }});
            return addressFinded;
        }
    });
</script>
</body>
</html>